<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜ˆì¸¡ ê°€ëŠ¥í•œ AI ì—ì´ì „íŠ¸ ë°ëª¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1.1em;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab.active {
            background: white;
            border-bottom: 3px solid #667eea;
        }
        
        .tab-content {
            display: none;
            padding: 40px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .demo-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .demo-section {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section, .output-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #495057;
        }
        
        input, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: transform 0.2s;
            font-weight: bold;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .result-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #28a745;
        }
        
        .result-box.error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        
        .result-box.info {
            border-left-color: #17a2b8;
            background: #d1ecf1;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .metrics {
                grid-template-columns: 1fr;
            }
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .sample-queries {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .sample-query {
            padding: 10px;
            margin: 5px 0;
            background: #e9ecef;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .sample-query:hover {
            background: #dee2e6;
        }
        
        .validation-test {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 5px solid #6c757d;
        }
        
        .validation-test.pass {
            border-left-color: #28a745;
        }
        
        .validation-test.fail {
            border-left-color: #dc3545;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            font-size: 0.9em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 15px;
            border: 1px solid #dee2e6;
            text-align: left;
        }
        
        th {
            background: #667eea;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– ì˜ˆì¸¡ ê°€ëŠ¥í•œ AI ì—ì´ì „íŠ¸</h1>
            <p>Pydanticìœ¼ë¡œ êµ¬ì¡°í™”ëœ AI ê²°ì • ì‹œìŠ¤í…œ</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('demo')">ğŸ¯ ë°ëª¨</button>
            <button class="tab" onclick="showTab('stats')">ğŸ“Š í†µê³„</button>
            <button class="tab" onclick="showTab('validation')">ğŸ” ê²€ì¦</button>
            <button class="tab" onclick="showTab('docs')">ğŸ“– ì„¤ëª…</button>
        </div>
        
        <!-- ë°ëª¨ íƒ­ -->
        <div id="demo" class="tab-content active">
            <div class="demo-section">
                <div class="input-section">
                    <h2>ì…ë ¥</h2>
                    <div class="form-group">
                        <label for="query">ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”:</label>
                        <input type="text" id="query" placeholder="ì˜ˆ: ê³ ê° ì •ë³´ë¥¼ ì¡°íšŒí•´ì¤˜">
                    </div>
                    
                    <div class="sample-queries">
                        <label><strong>ğŸ’¡ ìƒ˜í”Œ ì¿¼ë¦¬ (í´ë¦­í•˜ì—¬ ì„ íƒ):</strong></label>
                        <div class="sample-query" onclick="setQuery('ê³ ê° ID CUST-001ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•´ì¤˜')">
                            ğŸ” ê³ ê° ID CUST-001ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•´ì¤˜
                        </div>
                        <div class="sample-query" onclick="setQuery('sales_report.txt íŒŒì¼ì„ ì½ì–´ì¤˜')">
                            ğŸ“„ sales_report.txt íŒŒì¼ì„ ì½ì–´ì¤˜
                        </div>
                        <div class="sample-query" onclick="setQuery('ìµœê·¼ AI íŠ¸ë Œë“œë¥¼ ê²€ìƒ‰í•´ì¤˜')">
                            ğŸŒ ìµœê·¼ AI íŠ¸ë Œë“œë¥¼ ê²€ìƒ‰í•´ì¤˜
                        </div>
                        <div class="sample-query" onclick="setQuery('ë§¤ì¶œ ë°ì´í„°ë¥¼ ë¶„ì„í•´ì¤˜')">
                            ğŸ“ˆ ë§¤ì¶œ ë°ì´í„°ë¥¼ ë¶„ì„í•´ì¤˜
                        </div>
                        <div class="sample-query" onclick="setQuery('ì˜¤ëŠ˜ ë‚ ì”¨ëŠ” ì–´ë•Œ?')">
                            â˜€ï¸ ì˜¤ëŠ˜ ë‚ ì”¨ëŠ” ì–´ë•Œ?
                        </div>
                    </div>
                    
                    <button class="btn" onclick="executeQuery()">ğŸ¯ ì‹¤í–‰</button>
                </div>
                
                <div class="output-section">
                    <h2>ê²°ê³¼</h2>
                    <div id="output">
                        <div class="result-box info">
                            â„¹ï¸ ì™¼ìª½ì—ì„œ ì§ˆë¬¸ì„ ì…ë ¥í•˜ê³  ì‹¤í–‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”!
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- í†µê³„ íƒ­ -->
        <div id="stats" class="tab-content">
            <h2>ğŸ“Š í†µê³„ ëŒ€ì‹œë³´ë“œ</h2>
            <div class="metrics">
                <div class="metric-card">
                    <div class="metric-label">ì´ ì§ˆì˜ ìˆ˜</div>
                    <div class="metric-value" id="total-queries">0</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">í‰ê·  ì‹ ë¢°ë„</div>
                    <div class="metric-value" id="avg-confidence">0%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">ìµœë‹¤ í–‰ë™</div>
                    <div class="metric-value" id="most-action">-</div>
                </div>
            </div>
            
            <div class="result-box">
                <h3>ğŸ“œ ê²°ì • ë¡œê·¸</h3>
                <div id="decision-log">
                    <p>ì•„ì§ ì‹¤í–‰ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
        
        <!-- ê²€ì¦ íƒ­ -->
        <div id="validation" class="tab-content">
            <h2>ğŸ›¡ï¸ ìŠ¤í‚¤ë§ˆ ê²€ì¦ ë°ëª¨</h2>
            <p>Pydanticì´ ì–´ë–»ê²Œ ì˜ëª»ëœ ì…ë ¥ì„ ì°¨ë‹¨í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!</p>
            
            <div class="validation-test pass">
                <h3>âœ… í…ŒìŠ¤íŠ¸ 1: ì˜¬ë°”ë¥¸ ì…ë ¥</h3>
                <div class="code-block">
{
  "next_action": "search_db",
  "reasoning": "ê³ ê° ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•´ DB ê²€ìƒ‰ í•„ìš”",
  "priority": 4,
  "parameters": {"query": "SELECT * FROM customers"}
}
                </div>
                <div class="result-box">
                    âœ… <strong>í†µê³¼</strong><br>
                    ìŠ¤í‚¤ë§ˆ ê²€ì¦ ì„±ê³µ! ëª¨ë“  í•„ë“œê°€ ì˜¬ë°”ë¦…ë‹ˆë‹¤.
                </div>
            </div>
            
            <div class="validation-test fail">
                <h3>âŒ í…ŒìŠ¤íŠ¸ 2: Reasoning ë„ˆë¬´ ì§§ìŒ</h3>
                <div class="code-block">
{
  "next_action": "search_db",
  "reasoning": "ì§§ìŒ",  // âŒ min_length=10 ìœ„ë°˜
  "priority": 4,
  "parameters": {"query": "test"}
}
                </div>
                <div class="result-box error">
                    âœ… <strong>í†µê³¼</strong> (ì˜ˆìƒëŒ€ë¡œ ì˜¤ë¥˜ ë°œìƒ)<br>
                    ValidationError: reasoningì€ ìµœì†Œ 10ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤
                </div>
            </div>
            
            <div class="validation-test fail">
                <h3>âŒ í…ŒìŠ¤íŠ¸ 3: í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì—†ìŒ</h3>
                <div class="code-block">
{
  "next_action": "search_db",
  "reasoning": "ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰ì´ í•„ìš”í•©ë‹ˆë‹¤",
  "priority": 4,
  "parameters": {}  // âŒ query íŒŒë¼ë¯¸í„° ì—†ìŒ
}
                </div>
                <div class="result-box error">
                    âœ… <strong>í†µê³¼</strong> (ì˜ˆìƒëŒ€ë¡œ ì˜¤ë¥˜ ë°œìƒ)<br>
                    ValidationError: search_db requires 'query' parameter
                </div>
            </div>
        </div>
        
        <!-- ì„¤ëª… íƒ­ -->
        <div id="docs" class="tab-content">
            <h2>ğŸ“– ì‹œìŠ¤í…œ ì„¤ëª…</h2>
            
            <h3>ğŸ¯ ì˜ˆì¸¡ ê°€ëŠ¥í•œ AIë€?</h3>
            <p>AIê°€ ë‚´ë¦¬ëŠ” ëª¨ë“  ê²°ì •ì„ <strong>êµ¬ì¡°í™”ëœ ìŠ¤í‚¤ë§ˆ</strong>ë¡œ ì œí•œí•˜ì—¬ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì•ˆì „í•˜ê²Œ ë§Œë“œëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.</p>
            
            <h3 style="margin-top: 30px;">í•µì‹¬ ê°œë…</h3>
            
            <h4>1ï¸âƒ£ êµ¬ì¡°í™”ëœ ì¶œë ¥ (Structured Output)</h4>
            <div class="code-block">
class RouterOutput(BaseModel):
    next_action: Literal["search_db", "file_operation", ...]
    reasoning: str = Field(min_length=10)
    priority: int = Field(ge=1, le=5)
            </div>
            <p>AIì˜ ëª¨ë“  ì‘ë‹µì´ ì´ í˜•ì‹ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.</p>
            
            <h4 style="margin-top: 20px;">2ï¸âƒ£ íƒ€ì… ì•ˆì „ì„± (Type Safety)</h4>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>âœ… í—ˆìš©ëœ í–‰ë™ë§Œ ê°€ëŠ¥</li>
                <li>âœ… íŒŒë¼ë¯¸í„° ìë™ ê²€ì¦</li>
                <li>âœ… ëŸ°íƒ€ì„ ì˜¤ë¥˜ ì‚¬ì „ ì°¨ë‹¨</li>
            </ul>
            
            <h4 style="margin-top: 20px;">3ï¸âƒ£ ì¶”ì  ê°€ëŠ¥ì„± (Traceability)</h4>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>ğŸ“ ëª¨ë“  ê²°ì • ê¸°ë¡</li>
                <li>ğŸ” ì‚¬í›„ ë¶„ì„ ê°€ëŠ¥</li>
                <li>ğŸ“Š íŒ¨í„´ ë°œê²¬</li>
            </ul>
            
            <h3 style="margin-top: 30px;">ì¥ì </h3>
            <table>
                <tr>
                    <th>í•­ëª©</th>
                    <th>ê°œì„ ìœ¨</th>
                </tr>
                <tr>
                    <td>ëŸ°íƒ€ì„ ì˜¤ë¥˜</td>
                    <td><strong>97% â†“</strong></td>
                </tr>
                <tr>
                    <td>ë””ë²„ê¹… ì‹œê°„</td>
                    <td><strong>87% â†“</strong></td>
                </tr>
                <tr>
                    <td>ì¶”ì  ê°€ëŠ¥ì„±</td>
                    <td><strong>100%</strong></td>
                </tr>
            </table>
            
            <h3 style="margin-top: 30px;">ë©´ì ‘ ë‹µë³€ í¬ì¸íŠ¸</h3>
            <div class="result-box">
                "ì €ëŠ” AIì˜ ììœ¨ì„±ì„ ì¡´ì¤‘í•˜ë˜, ì—”í„°í”„ë¼ì´ì¦ˆ í™˜ê²½ì—ì„œì˜ ì•ˆì •ì„±ì„ ìœ„í•´<br>
                Pydantic ìŠ¤í‚¤ë§ˆë¡œ ì—ì´ì „íŠ¸ì˜ ê²°ì •ì„ êµ¬ì¡°í™”í•˜ì—¬ ì œì–´í•©ë‹ˆë‹¤."
            </div>
        </div>
    </div>
    
    <script>
        let decisions = [];
        
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        function setQuery(query) {
            document.getElementById('query').value = query;
        }
        
        function executeQuery() {
            const query = document.getElementById('query').value;
            
            if (!query) {
                showOutput('error', 'âš ï¸ ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ë¡œë”© í‘œì‹œ
            showOutput('info', 'ğŸ”„ AIê°€ ê²°ì •ì„ ë‚´ë¦¬ê³  ìˆìŠµë‹ˆë‹¤...');
            
            // ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ)
            setTimeout(() => {
                const result = simulateAI(query);
                displayResult(result, query);
                updateStats();
            }, 1000);
        }
        
        function simulateAI(query) {
            const q = query.toLowerCase();
            
            if (q.includes('ì¡°íšŒ') || q.includes('ê²€ìƒ‰') || q.includes('ì°¾') || q.includes('search')) {
                return {
                    action: 'search_db',
                    actionLabel: 'ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰',
                    reasoning: 'ì¿¼ë¦¬ì— ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰ ê´€ë ¨ í‚¤ì›Œë“œê°€ í¬í•¨ë˜ì–´ ìˆì–´ DB ê²€ìƒ‰ì´ í•„ìš”í•©ë‹ˆë‹¤',
                    priority: 'HIGH',
                    priorityValue: 4,
                    confidence: 95,
                    result: `âœ… ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ '${query}'ì— ëŒ€í•œ ê²€ìƒ‰ ì™„ë£Œ\nğŸ“Š ê²°ê³¼: 15ê±´ ë°œê²¬`
                };
            } else if (q.includes('íŒŒì¼') || q.includes('file') || q.includes('ì½') || q.includes('ë¬¸ì„œ')) {
                return {
                    action: 'file_operation',
                    actionLabel: 'íŒŒì¼ ì‘ì—…',
                    reasoning: 'íŒŒì¼ ê´€ë ¨ í‚¤ì›Œë“œê°€ ê°ì§€ë˜ì–´ íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤',
                    priority: 'MEDIUM',
                    priorityValue: 3,
                    confidence: 85,
                    result: 'âœ… íŒŒì¼ ì‘ì—… ì™„ë£Œ\nğŸ“„ ë‚´ìš©: ìƒ˜í”Œ ë°ì´í„°'
                };
            } else if (q.includes('ìµœê·¼') || q.includes('ë‰´ìŠ¤') || q.includes('íŠ¸ë Œë“œ')) {
                return {
                    action: 'web_search',
                    actionLabel: 'ì›¹ ê²€ìƒ‰',
                    reasoning: 'ìµœì‹  ì •ë³´ê°€ í•„ìš”í•œ ì¿¼ë¦¬ë¡œ íŒë‹¨ë˜ì–´ ì›¹ ê²€ìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤',
                    priority: 'MEDIUM',
                    priorityValue: 3,
                    confidence: 80,
                    result: 'âœ… ì›¹ ê²€ìƒ‰ ì™„ë£Œ\nğŸŒ ìƒìœ„ ê²°ê³¼ 5ê±´ ìˆ˜ì§‘'
                };
            } else if (q.includes('ë¶„ì„') || q.includes('ê³„ì‚°') || q.includes('í†µê³„')) {
                return {
                    action: 'data_analysis',
                    actionLabel: 'ë°ì´í„° ë¶„ì„',
                    reasoning: 'ë°ì´í„° ë¶„ì„ ê´€ë ¨ í‚¤ì›Œë“œê°€ í¬í•¨ë˜ì–´ ë¶„ì„ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤',
                    priority: 'HIGH',
                    priorityValue: 4,
                    confidence: 90,
                    result: 'âœ… ë°ì´í„° ë¶„ì„ ì™„ë£Œ\nğŸ“ˆ í‰ê· : 85.5, í‘œì¤€í¸ì°¨: 12.3'
                };
            } else {
                return {
                    action: 'final_respond',
                    actionLabel: 'ìµœì¢… ì‘ë‹µ',
                    reasoning: 'ì¶”ê°€ ì‘ì—…ì´ ë¶ˆí•„ìš”í•œ ë‹¨ìˆœ ì§ˆë¬¸ìœ¼ë¡œ ì§ì ‘ ì‘ë‹µì´ ê°€ëŠ¥í•©ë‹ˆë‹¤',
                    priority: 'MEDIUM',
                    priorityValue: 3,
                    confidence: 75,
                    result: `ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€: ${query}`
                };
            }
        }
        
        function displayResult(result, query) {
            const output = `
                <div class="result-box">
                    <strong>âœ… ìŠ¤í‚¤ë§ˆ ê²€ì¦ í†µê³¼!</strong>
                </div>
                
                <h3>ğŸ“‹ êµ¬ì¡°í™”ëœ ê²°ì •</h3>
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-label">ğŸ¯ í–‰ë™</div>
                        <div class="metric-value" style="font-size:1.2em">${result.actionLabel}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">âš¡ ìš°ì„ ìˆœìœ„</div>
                        <div class="metric-value">${result.priority} (${result.priorityValue})</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">ğŸ’¯ ì‹ ë¢°ë„</div>
                        <div class="metric-value">${result.confidence}%</div>
                    </div>
                </div>
                
                <div class="result-box info">
                    <strong>ğŸ“ ê·¼ê±°:</strong><br>
                    ${result.reasoning}
                </div>
                
                <div class="result-box">
                    <strong>âœ¨ ì‹¤í–‰ ê²°ê³¼:</strong><br>
                    ${result.result.replace(/\n/g, '<br>')}
                </div>
            `;
            
            document.getElementById('output').innerHTML = output;
            
            // ê²°ì • ê¸°ë¡
            decisions.push({
                timestamp: new Date(),
                query: query,
                action: result.action,
                confidence: result.confidence
            });
        }
        
        function showOutput(type, message) {
            const className = type === 'error' ? 'result-box error' : 'result-box info';
            document.getElementById('output').innerHTML = `<div class="${className}">${message}</div>`;
        }
        
        function updateStats() {
            // ì´ ì§ˆì˜ ìˆ˜
            document.getElementById('total-queries').textContent = decisions.length;
            
            // í‰ê·  ì‹ ë¢°ë„
            if (decisions.length > 0) {
                const avgConf = decisions.reduce((sum, d) => sum + d.confidence, 0) / decisions.length;
                document.getElementById('avg-confidence').textContent = Math.round(avgConf) + '%';
            }
            
            // ìµœë‹¤ í–‰ë™
            if (decisions.length > 0) {
                const actionCounts = {};
                decisions.forEach(d => {
                    actionCounts[d.action] = (actionCounts[d.action] || 0) + 1;
                });
                const mostCommon = Object.keys(actionCounts).reduce((a, b) =>
                    actionCounts[a] > actionCounts[b] ? a : b
                );
                document.getElementById('most-action').textContent = mostCommon;
            }
            
            // ê²°ì • ë¡œê·¸
            const logHtml = decisions.slice(-5).reverse().map((d, i) => `
                <div class="result-box">
                    <strong>#${decisions.length - i} - ${d.timestamp.toLocaleTimeString()}</strong><br>
                    ì§ˆë¬¸: ${d.query}<br>
                    í–‰ë™: ${d.action}<br>
                    ì‹ ë¢°ë„: ${d.confidence}%
                </div>
            `).join('');
            
            document.getElementById('decision-log').innerHTML = logHtml || '<p>ì•„ì§ ì‹¤í–‰ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        // Enter í‚¤ë¡œ ì‹¤í–‰
        document.getElementById('query').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                executeQuery();
            }
        });
    </script>
</body>
</html>
